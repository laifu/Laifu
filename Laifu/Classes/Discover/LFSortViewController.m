////  LFSortViewController.m//  Laifu////  Created by 于 龙 on 13-7-22.//  Copyright (c) 2013年 于龙. All rights reserved.//#import "LFSortViewController.h"#import "DefineRequestUrl.h"@interface LFSortViewController ()@end@implementation LFSortViewController- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil{    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];    if (self) {        // Custom initialization    }    return self;}- (void)viewDidLoad{    [super viewDidLoad];    self.navigationController.navigationBar.tintColor = [UIColor hexStringToColor:@"#fafafa" alpha:0.97];    self.view.backgroundColor = kAllBackgroundColor;    [self createNavigationBar];    [self createtopView];    self.activitesArray = [NSMutableArray array];    for (NSInteger i = 0; i < 20; i++) {        LFActivity *activity = [[LFActivity alloc] init];        activity.imageURL =  @"http://c.hiphotos.bdimg.com/album/w%3D2048/sign=af68f9174610b912bfc1f1fef7c5fd03/d043ad4bd11373f0e07bd133a50f4bfbfaed04d1.jpg";        activity.title = [NSString stringWithFormat:@"分类分类%d",i * 1000];        activity.memberCount = i * 2000;        activity.travelCount = i * 3000;        activity.randomColor = (i % 2 == 0) ? @"#33b5b7" : @"#e0dfdf";        [self.activitesArray addObject:activity];        [activity release];    }    [self createTableView];}- (void)createNavigationBar {        UIView *titleView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];    titleView.backgroundColor = [UIColor clearColor];        UILabel *title = [[UILabel alloc] initWithFrame:CGRectMake(115, 7, 80, 29)];    title.backgroundColor = [UIColor clearColor];    //    title.font = [UIFont systemFontOfSize:16.0f];    title.textAlignment = UITextAlignmentCenter;    title.text = @"分类";    [titleView addSubview:title];    [title release];        UIButton *closeBtn = [UIButton buttonWithType:UIButtonTypeCustom];    closeBtn.frame = CGRectMake(270, 7, 30, 30);    [closeBtn setShowsTouchWhenHighlighted:YES];    [closeBtn setBackgroundImage:[UIImage imageNamed:@"gb_btn.png"] forState:UIControlStateNormal];    [closeBtn addTarget:self action:@selector(closeBtnClicked:) forControlEvents:UIControlEventTouchUpInside];    [titleView addSubview:closeBtn];        self.navigationItem.titleView = titleView;}- (void)createtopView; {        _lineView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 1)];    _lineView.backgroundColor = [UIColor hexStringToColor:@"#000000" alpha:0.5];    [self.view addSubview:_lineView];    [_lineView release];        _topView = [[UIView alloc] initWithFrame:CGRectMake(0, _lineView.frame.origin.y+_lineView.frame.size.height, 320, 39)];    _topView.backgroundColor = kAllBackgroundColor;    [self.view addSubview:_topView];    [_topView release];        NSArray *btnArray = [[NSArray alloc] initWithObjects:@"热门",@"最新",@"附近",nil];    self.buttons = [NSMutableArray arrayWithCapacity:[btnArray count]];    UIButton *btn;    CGFloat width = 81.0;    CGFloat height = 24.0;    for (int i = 0; i < [btnArray count]; i++)    {        btn = [UIButton buttonWithType:UIButtonTypeCustom];        btn.showsTouchWhenHighlighted = YES;        btn.tag = i;        switch (btn.tag) {            case 0:                btn.frame = CGRectMake(15, 7, width, height);                btn.selected = YES;                [btn setBackgroundColor:[UIColor hexStringToColor:@"#bcbcbc" alpha:1.0]];                break;            case 1:                btn.frame = CGRectMake(119.5, 7, width, height);                [btn setBackgroundColor:kAllBackgroundColor];                break;            case 2:                btn.frame = CGRectMake(224, 7, width, height);                [btn setBackgroundColor:kAllBackgroundColor];                break;            default:                break;        }                [btn setTitleColor:[UIColor hexStringToColor:@"#ffffff" alpha:1.0] forState:UIControlStateSelected];        [btn setTitleColor:[UIColor hexStringToColor:@"#bcbcbc" alpha:1.0] forState:UIControlStateNormal];        [btn setTitle:[btnArray objectAtIndex:i] forState:UIControlStateNormal];        [btn.layer setCornerRadius:12.5];        btn.titleLabel.font = [UIFont systemFontOfSize:13.0f];        [btn addTarget:self action:@selector(tabBarButtonClicked:) forControlEvents:UIControlEventTouchUpInside];        [self.buttons addObject:btn];        [_topView addSubview:btn];    }}- (void)tabBarButtonClicked:(id)sender{	UIButton *btn = sender;	[self selectTabAtIndex:btn.tag];}- (void)selectTabAtIndex:(NSInteger)index{	for (int i = 0; i < [self.buttons count]; i++)	{		UIButton *b = [self.buttons objectAtIndex:i];        b.backgroundColor = kAllBackgroundColor;		b.selected = NO;	}	UIButton *btn = [self.buttons objectAtIndex:index];	btn.selected = YES;        for (int i = 0; i < [self.buttons count]; i++)	{        UIButton *btn = [self.buttons objectAtIndex:index];        btn.backgroundColor = btn.selected?[UIColor hexStringToColor:@"#bcbcbc" alpha:1.0]:kAllBackgroundColor;	}    NSLog(@"Select index: %d",btn.tag);}- (void)createTableView {        _tableView = [[UITableView alloc] initWithFrame:CGRectMake(0,_topView.frame.origin.y+_topView.frame.size.height, self.view.bounds.size.width,kHeight-64-40) style:UITableViewStylePlain];    [_tableView setBackgroundView:nil];    _tableView.backgroundColor = [UIColor clearColor];    _tableView.separatorStyle = UITableViewCellSeparatorStyleNone;    _tableView.delegate = self;    _tableView.dataSource = self;    [self.view addSubview:_tableView];    [_tableView release];}- (void)closeBtnClicked:(id)sender {        [self.navigationController.view removeFromSuperview];}#pragma mark - Table view data source- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{    return 1;}- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{    return self.activitesArray.count;}- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{    static NSString *CellIdentifier = @"Cell";    LFActivityCell *cell = (LFActivityCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];    if (cell == nil) {        cell = [[[LFActivityCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];        cell.selectionStyle = UITableViewCellSelectionStyleNone;    }        cell.activity = [self.activitesArray objectAtIndex:indexPath.row];        // Configure the cell...        return cell;}- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {    return 268 / 2.0f;}#pragma mark - Table view delegate- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{    [tableView deselectRowAtIndexPath:indexPath animated:YES];}- (void)didReceiveMemoryWarning{    [super didReceiveMemoryWarning];    // Dispose of any resources that can be recreated.}@end